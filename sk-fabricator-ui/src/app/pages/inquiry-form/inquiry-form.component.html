<section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto bg-white p-8 md:p-12 rounded-2xl shadow-xl border-t-8 border-sk-primary">
            <h2 class="text-3xl font-bold text-gray-800 mb-2 text-center">Get a Free Consultation</h2>
            <p class="text-center text-gray-500 mb-8">
                Tell us about your project. Our experts will get back to you within 24 hours.
            </p>

            <form [formGroup]="inquiryForm" (ngSubmit)="onSubmit()" class="space-y-6">
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700">Full Name</label>
                    <input id="name" type="text" formControlName="name" placeholder="John Doe"
                        class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-sk-primary focus:border-sk-primary transition duration-150"
                        [ngClass]="{'border-red-500': inquiryForm.get('name')?.invalid && inquiryForm.get('name')?.touched}">
                    <p *ngIf="inquiryForm.get('name')?.invalid && inquiryForm.get('name')?.touched"
                        class="mt-2 text-sm text-red-600">Name is required.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                        <input id="email" type="email" formControlName="email" placeholder="you@company.com"
                            class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-sk-primary focus:border-sk-primary transition duration-150"
                            [ngClass]="{'border-red-500': inquiryForm.get('email')?.invalid && inquiryForm.get('email')?.touched}">
                        <p *ngIf="inquiryForm.get('email')?.hasError('required') && inquiryForm.get('email')?.touched"
                            class="mt-2 text-sm text-red-600">Email is required.</p>
                        <p *ngIf="inquiryForm.get('email')?.hasError('email') && inquiryForm.get('email')?.touched"
                            class="mt-2 text-sm text-red-600">Must be a valid email format.</p>
                    </div>
                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-700">Phone Number (Optional)</label>
                        <input id="phone" type="tel" formControlName="phone" placeholder="+91 98765 43210"
                            class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-sk-primary focus:border-sk-primary transition duration-150"
                            [ngClass]="{'border-red-500': inquiryForm.get('phone')?.invalid && inquiryForm.get('phone')?.touched}">
                        </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="subject" class="block text-sm font-medium text-gray-700">Subject (Optional)</label>
                        <input id="subject" type="text" formControlName="subject" placeholder="Project Title or Topic"
                            class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-sk-primary focus:border-sk-primary transition duration-150">
                    </div>
                    <div>
                        <label for="category" class="block text-sm font-medium text-gray-700">Service Category (Optional)</label>
                        <select id="category" formControlName="category"
                            class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-sk-primary focus:border-sk-primary transition duration-150">
                            <option value="">Select a Category</option>
                            <option value="Industrial Piping">Industrial Piping</option>
                            <option value="Structure Fabrication">Structure Fabrication</option>
                            <option value="Equipment Erection">Equipment Erection</option>
                            <option value="General Inquiry">General Inquiry</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label for="preferredContact" class="block text-sm font-medium text-gray-700">Preferred Contact Method (Optional)</label>
                    <div class="mt-2 flex space-x-6">
                        <label class="inline-flex items-center">
                            <input type="radio" formControlName="preferredContact" value="Email" class="form-radio text-sk-primary">
                            <span class="ml-2 text-gray-700">Email</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" formControlName="preferredContact" value="Phone" class="form-radio text-sk-primary">
                            <span class="ml-2 text-gray-700">Phone</span>
                        </label>
                    </div>
                </div>

                <div>
                    <label for="message" class="block text-sm font-medium text-gray-700">Project Details / Message</label>
                    <textarea id="message" formControlName="message" rows="4"
                        placeholder="Describe your project, required services, and timeline."
                        class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-sk-primary focus:border-sk-primary transition duration-150"
                        [ngClass]="{'border-red-500': inquiryForm.get('message')?.invalid && inquiryForm.get('message')?.touched}"></textarea>
                    <p *ngIf="inquiryForm.get('message')?.invalid && inquiryForm.get('message')?.touched"
                        class="mt-2 text-sm text-red-600">Message is required.</p>
                </div>

                <button type="submit" [disabled]="inquiryForm.invalid || submissionStatus() === 'loading'"
                    class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-lg font-medium text-white bg-sk-primary hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sk-primary transition duration-150 disabled:opacity-50 disabled:cursor-not-allowed">
                    @if (submissionStatus() === 'loading') {
                    <span>Submitting...</span>
                    } @else {
                    <span>Submit Inquiry</span>
                    }
                </button>

                @if (responseMessage()) {
                <div [ngClass]="{
                    'bg-green-100 border-green-400 text-green-700': submissionStatus() === 'success',
                    'bg-red-100 border-red-400 text-red-700': submissionStatus() === 'error'
                    }" class="p-4 border-l-4 rounded-lg mt-4" role="alert">
                    <p class="font-bold">{{ submissionStatus() | titlecase }}</p>
                    <p>{{ responseMessage() }}</p>
                </div>
                }
            </form>
        </div>

    </div>
</section>